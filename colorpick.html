<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AJLB Generator - Color Picker</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #a8edea, #fed6e3);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    min-height: 100vh;
    padding: 50px 20px;
    text-align: center;
}

h1 {
    font-size: 2.5rem;
    margin-bottom: 30px;
    color: #333;
}

button, input {
    padding: 12px 20px;
    margin: 10px;
    border-radius: 8px;
    border: none;
    font-size: 1rem;
    cursor: pointer;
}

button {
    background-color: #fff;
    color: #333;
    box-shadow: 2px 2px 8px rgba(0,0,0,0.1);
    transition: all 0.2s ease;
}

button:hover {
    transform: translateY(-2px);
    box-shadow: 2px 4px 12px rgba(0,0,0,0.2);
}

input[type="text"] {
    display: block;
    width: 300px;
    margin: 10px auto;
}

#generateBtn {
    display: none;
}

</style>
</head>
<body>

<h1>Pick a Color</h1>

<div>
    <button class="colorBtn" data-color="&#E67E22">Orange</button>
    <button class="colorBtn" data-color="&#E74C3C">Red</button>
    <button class="colorBtn" data-color="&#2ECC71">Green</button>
    <button class="colorBtn" data-color="&#3498DB">Blue</button>
    <button class="colorBtn" data-color="&#FFFFFF">White</button>
    <button class="colorBtn" data-color="&#F1C40F">Yellow</button>
    <button class="colorBtn" data-color="&#FF69B4">Pink</button>
    <button class="colorBtn" data-color="&#9B59B6">Purple</button>
    <button class="colorBtn" data-color="&#00FFFF">Aqua</button>
    <button class="colorBtn" data-color="&#00CED1">Cyan</button>
</div>

<input type="text" id="customColor" placeholder="Or enter custom hex: &#E67E22">

<div id="preview" style="margin:10px; display:none;">Selected: <span id="previewColor">none</span></div>

<button id="generateBtn" style="display:none;">Continue</button>

<script>
// Normalize input to the '&#RRGGBB' format, return null if invalid
function normalizeToAmpHex(raw){
    if(!raw) return null;
    let v = raw.trim();
    if(v.startsWith('&#')) v = v.slice(2);
    if(v.startsWith('#')) v = v.slice(1);
    // now v should be 6 hex chars
    if(/^[0-9A-Fa-f]{6}$/.test(v)){
        return '&#' + v.toUpperCase();
    }
    return null;
}

let selectedColor = null;
const previewEl = document.getElementById('preview');
const previewColor = document.getElementById('previewColor');

function showPreview(norm){
    if(!norm) {
        previewEl.style.display = 'none';
        return;
    }
    previewEl.style.display = 'block';
    // show a visual square plus text
    const hex = norm.replace('&#', '#');
    previewColor.textContent = norm + ' ';
    previewColor.style.color = hex;
}

// Preset color buttons
document.querySelectorAll('.colorBtn').forEach(btn => {
    btn.addEventListener('click', () => {
        const raw = btn.dataset.color || '';
        const norm = normalizeToAmpHex(raw);
        if(norm){
            selectedColor = norm;
            showPreview(selectedColor);
            document.getElementById('generateBtn').style.display = 'inline-block';
        }
    });
});

// Custom color input (accepts E67E22, #E67E22 or &#E67E22)
const customInput = document.getElementById('customColor');
customInput.addEventListener('input', () => {
    const val = customInput.value;
    const norm = normalizeToAmpHex(val);
    if(norm){
        selectedColor = norm;
        showPreview(selectedColor);
        document.getElementById('generateBtn').style.display = 'inline-block';
    } else {
        // hide continue if invalid
        document.getElementById('generateBtn').style.display = 'none';
        showPreview(null);
    }
});

// Continue: save to localStorage then go to generate
document.getElementById('generateBtn').addEventListener('click', () => {
    if(!selectedColor){
        alert('Please select or enter a valid color');
        return;
    }
    localStorage.setItem('selectedColor', selectedColor);
    window.location.href = 'generate.html';
});
</script>

</body>
</html>
